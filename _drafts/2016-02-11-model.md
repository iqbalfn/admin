---
layout: post
title: Model
---

This is how to create model. Or the model can also be generated by 
[model generator]({{ site.baseurl }}{% post_url 2016-02-11-model-generator %}).

1. The model name should be taken from the table name with modification as below:
    1. The first letter should be uppercase of the first letter of table name.
    2. Followed by the other letter of table name in lower case with removed 
       character that is not `a-zA-Z0-9`.
    3. Add `_model` after that
2. All model should extended from `MY_Model`.
3. The model file name should be `model name` + `.php`.
4. Put the file under `application/models` directory.
5. All model should call `$this->load->database()` on custruction to connect the
database. We're not connect the database automatically.
6. All model should call `parent::__construct()`.
7. Model should have `table` property with value the table name.
8. Model should have `fields` property with value array list of table field and
the formatter rule to handle the field.

For example, model name for table `user` is `User_model` with file name 
`User_model.php`. And the model name for `user_perms` should be `Userperms_model`
with file name `Userperms_model.php`.

Example of `user_perms` table model:

{% highlight php %}
<?php

if(!defined('BASEPATH'))
    die;

/**
 * The model of table `user_perms`
 */
class Userperms_model extends MY_Model
{
    /**
     * Table name
     * @var string
     */
    public $table = 'user_perms';

    /**
     * List of table field for formatter rule.
     * @var array
     */
    public $fields = [
        'id'      => 'integer',
        'user'    => '@parent[user]',
        'perms'   => 'string',
        'created' => 'date'
    ]

    /**
     * Constructor
     */
    function __construct(){
        $this->load->database();
        parent::__construct();
    }
}
{% endhighlight %}